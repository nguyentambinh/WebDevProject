@model IEnumerable<QLNSVATC.Models.FN_Models.MaterialPurchaseRowVM>
@using System.Collections.Generic

@using System.Collections.Generic
@{
    string lang = ViewBag.CurrentLang as string ?? "en_US";

    Func<Dictionary<string, string>, string> L = d =>
    {
        if (d.ContainsKey(lang)) return d[lang];
        if (d.ContainsKey("en_US")) return d["en_US"];
        return d.Values.First();
    };

    var tOwner = new Dictionary<string, string> {
        { "vi_VN", "Người đề nghị" },
        { "en_US", "Owner" },
        { "jp_JP", "申請者" },
        { "kr_KR", "신청자" },
        { "cn_CN", "申请人" }
    };
    var tCat = new Dictionary<string, string> {
        { "vi_VN", "Hạng mục" },
        { "en_US", "Category" },
        { "jp_JP", "カテゴリ" },
        { "kr_KR", "분류" },
        { "cn_CN", "类别" }
    };
    var tAmount = new Dictionary<string, string> {
        { "vi_VN", "Giá trị" },
        { "en_US", "Amount" },
        { "jp_JP", "金額" },
        { "kr_KR", "금액" },
        { "cn_CN", "金额" }
    };
    var tFreq = new Dictionary<string, string> {
        { "vi_VN", "Tần suất" },
        { "en_US", "Frequency" },
        { "jp_JP", "頻度" },
        { "kr_KR", "주기" },
        { "cn_CN", "频率" }
    };
    var tAction = new Dictionary<string, string> {
        { "vi_VN", "Thao tác" },
        { "en_US", "Action" },
        { "jp_JP", "操作" },
        { "kr_KR", "작업" },
        { "cn_CN", "操作" }
    };
}

<section class="mat-card">
    <div class="mat-card-title-row">
        <h3 class="mat-card-title">
            @L(new Dictionary<string, string>{
{ "vi_VN", "Đơn mua nguyên vật liệu chờ duyệt" },
{ "en_US", "Raw material purchase approvals" },
{ "jp_JP", "原材料仕入れ承認一覧" },
{ "kr_KR", "원자재 구매 승인 목록" },
{ "cn_CN", "原材料采购审批列表" }
})
        </h3>
    </div>

    <table class="mat-table">
        <thead>
            <tr>
                <th>@L(tOwner)</th>
                <th>@L(tCat)</th>
                <th>@L(tAmount)</th>
                <th>@L(tFreq)</th>
                <th>@L(tAction)</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var row in Model)
            {
                <tr>
                    <td>
                        <div class="mat-owner-cell">
                            <div class="avatar-circle">
                                @((row.RequestCode ?? "??").PadLeft(2).Substring(0,2).ToUpper())
                            </div>
                            <div class="owner-info">
                                <div class="owner-name">@row.RequestCode</div>
                                <div class="owner-role">
                                    @row.ProjectCode ?? "No project linked"
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span class="mat-tag mat-tag-steel">
                            @row.MaterialName
                        </span>
                    </td>
                    <td class="mat-amount">
                        @row.Amount.ToString("N0")
                    </td>
                    <td>
                        @row.Date?.ToString("dd/MM/yyyy") ?? "-"
                    </td>
                    <td class="mat-actions">
                        <button class="mat-action-btn" title="View detail">
                            <i class="fa-regular fa-eye"></i>
                        </button>
                        <button class="mat-action-btn ok" title="Approve">
                            <i class="fa-solid fa-check"></i>
                        </button>
                        <button class="mat-action-btn reject" title="Reject">
                            <i class="fa-solid fa-xmark"></i>
                        </button>
                    </td>
                </tr>
            }
        </tbody>

    </table>
</section>
